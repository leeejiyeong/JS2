<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìƒì„¸í˜ì´ì§€</title>
</head>
<script src="https://code.jquery.com/jquery-3.6.3.js" integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM="
    crossorigin="anonymous"></script>
<!-- ë¶€íŠ¸ìŠ¤íŠ¸ë©ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ bootstrap cdn ë§í¬ -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">

<style>
    /* ì›¹í°íŠ¸ */
    @font-face {
        font-family: 'yg-jalnan';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_four@1.2/JalnanOTF00.woff') format('woff');
        font-weight: normal;
        font-style: normal;
    }

    /* í°íŠ¸ ì„¤ì •í•´ì£¼ê¸° */
    * {
        font-family: 'yg-jalnan';
        /* ì´ë¦„ì„¤ì • */
        font-size: large;
    }

    .container {
        margin-top: 5vh;
    }

    button {
        margin: 2vh 0 4vh 0;
        float: right;
    }

    a {
        display: block;
    }
</style>

<body>
    <p>ì˜í™” ìƒì„¸í˜ì´ì§€</p>
    <div class="container">
        <div class="row">
            <div class="col-12" id="list">

            </div>
        </div>
        <div class="row" id="nextInfo">
            <button class="btn btn-warning" type="button">
                ì˜í™”ì‚¬ ì¡°íšŒ
            </button>
        </div>
    </div>

    <script>
        //í˜„ì¬í˜ì´ì§€urlì„ ê°€ì ¸ì™€ì„œ ?ê¸°ì¤€ìœ¼ë¡œ ìë¥´ê¸°(ì˜í™”ì½”ë“œ)
        let movieCd = location.href.split('?')[1];

        $(function () {         //=window.onload

            //Ajaxí˜¸ì¶œ
            $.ajax({
                url: `http://www.kobis.or.kr/kobisopenapi/webservice/rest/movie/searchMovieInfo.json?key=f5eef3421c602c6cb7ea224104795888&movieCd=${movieCd}`,
                dataType: 'json',
                method: 'get',
                success: function (data) {
                    let movieInfo = data.movieInfoResult.movieInfo;

                    //#list divì— ë¶™ì¸ë‹¤. íƒœê·¸ë¥¼ ë§Œë“¤ì–´ì„œ
                    $('#list').append(
                        $('<label>').text('ğŸ• ì˜í™”ì œëª©(í•œê¸€)'),
                        $('<p>').text('# '+movieInfo.movieNm),
                        $('<label>').text('ğŸ• ì˜í™”ì œëª©(ì˜ì–´)'),
                        $('<p>').text('# '+movieInfo.movieNmEn),
                        $('<label>').text('ğŸ• ê°œë´‰ë‚ ì§œ'),
                        $('<p>').text('# '+movieInfo.openDt),
                        $('<label>').text('ğŸ• ê°ë…'),
                        $('<p>').text('# '+movieInfo.directors[0].peopleNm),
                        $('<label>').text('ğŸ• ë°°ìš°'),
                    )

                    for (let actor of movieInfo.actors) {
                        let urlInfo =
                            `https://search.naver.com/search.naver?where=nexearch&sm=top_sug.pre&fbm=1&acr=1&acq=tlsehdduq&qdt=0&ie=utf8&query=${actor.peopleNm}`;
                        
                        //#listì— ë¶™ì¸ë‹¤. aíƒœê·¸ë¥¼ ë§Œë“¤ì–´ì„œ. textë„£ê³ . ë§í¬ ë„£ê³ 
                        $('#list').append(
                            $('<a>').text(actor.peopleNm)
                                .attr('href', urlInfo)
                        )
                    }

                    //#listì— ë¶™ì¸ë‹¤. aíƒœê·¸ë¥¼ ë§Œë“¤ì–´ì„œ. ë§í¬ë„£ê³ . textë„£ê³ 
                    $('#list').append(
                        $('<a>').attr('href', 'javascript:history.back()')
                        .text('ë’¤ë¡œê°€ê¸°')

                    )
                },
                error: function (error) {

                }

            })
        })
        $('button').click('href',function(){
            $.ajax({
                url : `http://www.kobis.or.kr/kobisopenapi/webservice/rest/movie/searchMovieInfo.json?key=f5eef3421c602c6cb7ea224104795888&movieCd=${movieCd}`,
                dataType : 'json',
                method : 'get',
                success : function(data){
                    let movieInfo = data.movieInfoResult.movieInfo;
                    let companyCd = movieInfo.companys[0].companyCd;
                    location.href = `/230105_14 movieCompany.html?${companyCd}`;
                }
            })
        })
    </script>
</body>

</html>