<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>시험2</title>
</head>
<!-- 제이쿼리 쓰기위한 링크추가 -->
<script src="https://code.jquery.com/jquery-3.6.3.js" integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM="
    crossorigin="anonymous"></script>
<!-- 부트스트랩을 사용하기 위한 bootstrap cdn 링크 -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
<style>
    /* 웹폰트 */
    @font-face {
        font-family: 'yg-jalnan';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_four@1.2/JalnanOTF00.woff') format('woff');
        font-weight: normal;
        font-style: normal;
    }

    /* 폰트 설정해주기 */
    * {
        font-family: 'yg-jalnan';
        /* 이름설정 */
        font-size: large;
    }

    body {
        margin: 20px
    }

    .container {
        margin-top: 5vh;
    }
</style>

<body>
    <h1>To Do List</h1>
    <input type="text" id="doList" style="width: 300px;">
    <button type="button" onclick="saveList()">ListUp</button>

    <!-- 체크된 항목을 삭제하는 버튼 -->
    <button type="button" onclick="deleteElement()">Delete</button>
    <br>
    <br>
    <br>
    <h2>List</h2>
    <div id="list">

    </div>
    <h2>History</h2>
    <div id="history">

    </div>
    <script>
        //저장버튼 클릭이벤트
        function saveList() {

            //input내용 가져오기
            let p = $('<p>')
            p.text($('#doList').val())

            //체크박스
            let ckb = $('<input>')
            ckb.attr('type', 'checkbox')
            p.prepend(ckb)                  //이미 데이터가 들어있는 곳에다가 앞에 붙여야 하기 때문에 prepend사용
            
            /* 풀이
            버튼이 눌렸을때 이동하면서 버튼이름이 바뀌면서 지워지는 이벤트가 동시에 발생하게해야한다.
            나는 따로했기 때문에 두번눌러야 지워지는것.
            클릭할때 text를 delete로 바꿔주고 그걸 클릭했을때 부모요소가 지워지게 해야함 (delete로 변경 후 이벤트 변경)
            
            제이쿼리는 익명함수를 많이 사용한다.

            */

            //버튼
            let btn = $('<button>')
            btn.attr('type', 'button')
                .text('Complete')
                .addClass('btn btn-dark')
                .click(move)

            p.append(btn)

            //리스트에 붙이기
            $('#list').append(p)

            doList.value = "";

        }

        function move() {
            let history = $('#history')
            //console.log(event.currentTarget)
            $('#history p button').text('delete')
                .click(deleteEl)

            history.append(event.currentTarget.parentNode)
        }

        function deleteEl() {
            event.currentTarget.parentNode.remove()
        }
    </script>
</body>

</html>